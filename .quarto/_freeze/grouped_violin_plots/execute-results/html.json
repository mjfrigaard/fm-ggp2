{
  "hash": "0db2a6ee7fed54f61d17f3f138f7b80a",
  "result": {
    "markdown": "# Grouped violin plots {.unnumbered}\n\n\n\n\n\n::: {.callout-tip appearance='simple' icon=false}\n***This graph is largely complete and just needs final proof reading.*** \n:::\n\n\n:::: {.callout-note collapse=\"false\" icon=false}\n## Graph info\n::: {style=\"font-size: 1.25em; color: #007bff;\"}\n**Should I use this graph?**\n:::\n\n<br>\n\n\n::: {.cell layout-align=\"right\"}\n::: {.cell-output-display}\n![](grouped_violin_plots_files/figure-html/full_code_display-1.png){fig-align='right' width=60% height=60%}\n:::\n:::\n\n\n::: {style=\"font-size: 1.10em; color: #007bff;\"}\n**This graph requires:**\n:::\n\n::: {style=\"font-size: 1.05em; color: #fa7b3c;\"}\n**✅ a categorical variable**      \n:::\n\n::: {style=\"font-size: 1.05em; color: #fa7b3c;\"}\n**✅ a numeric (continuous) variable**\n:::\n\n::::\n\n## Description \n\nA ‘violin plot’ is a variation of a density or ridgeline plot,  where the distribution is plotted symmetrically, creating a two-sided, smoothed distribution.\n\n## Getting set up\n\n:::: {.panel-tabset}\n\n### Packages\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**PACKAGES:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nInstall packages.\n:::\n\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ninstall.packages(\"palmerpenguins\")\nlibrary(palmerpenguins)\nlibrary(ggplot2)\n```\n:::\n\n:::\n\n### Data\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**DATA:**\n:::\n\n::: {.column-margin}\n![Artwork by allison horst](www/lter_penguins.png){fig-align=\"right\" width=\"100%\" height=\"100%\"}\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nRemove missing `island` from `penguins`\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\npeng_violin <- filter(penguins, !is.na(island))\nglimpse(peng_violin)\n#> Rows: 344\n#> Columns: 8\n#> $ species           <fct> Adelie, Adelie, Adelie, Adelie, …\n#> $ island            <fct> Torgersen, Torgersen, Torgersen,…\n#> $ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3…\n#> $ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6…\n#> $ flipper_length_mm <int> 181, 186, 195, NA, 193, 190, 181…\n#> $ body_mass_g       <int> 3750, 3800, 3250, NA, 3450, 3650…\n#> $ sex               <fct> male, female, female, NA, female…\n#> $ year              <int> 2007, 2007, 2007, 2007, 2007, 20…\n```\n:::\n\n:::\n::::\n\n:::: {.panel-tabset}\n\n### Code\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**CODE:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\n\nCreate labels with `labs()`\n\nInitialize the graph with `ggplot()` and provide `data`\n\nMap `island` to the `x`, `bill_length_mm` to the `y`, and  `island` to `fill` \n\nSet `alpha` to `2/3`\n\nRemove the legend with `show.legend = FALSE`\n\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nlabs_grp_violin <- labs(\n  title = \"Adult foraging penguins\", \n  subtitle = \"Palmer Archipelago, Antarctica\",\n  x = \"Island\", fill = \"Island\",\n  y = \"Bill length (millimeters)\")\nggp2_grp_violin <- ggplot(data = peng_violin,\n       aes(x = island, \n           y = bill_length_mm, \n        fill = island)) +\n  geom_violin(alpha = 2/3, \n      show.legend = FALSE) \nggp2_grp_violin + \n  labs_grp_violin\n```\n:::\n\n:::\n\n### Graph\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**GRAPH:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nViolin plots can allow us to compare the 'center' and 'spread' of continuous variables across categorical groups.\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n\n```{.r .cell-code}\nlabs_grp_violin <- labs(\n  title = \"Adult foraging penguins\", \n  subtitle = \"Palmer Archipelago, Antarctica\",\n  x = \"Island\", fill = \"Island\",\n  y = \"Bill length (millimeters)\")\nggp2_grp_violin <- ggplot(data = peng_violin,\n       aes(x = island, \n           y = bill_length_mm, \n        fill = island)) +\n  geom_violin(alpha = 2/3, \n      show.legend = FALSE) \nggp2_grp_violin + \n  labs_grp_violin\n```\n\n::: {.cell-output-display}\n![](grouped_violin_plots_files/figure-html/create_graph_grp_violin-1.png){width=100% height=100%}\n:::\n:::\n\n:::\n\n::::\n\n## More info\n\n:::: {.panel-tabset}\n\n### Quartiles\n\n::: {.column-margin}\nChange the shape of the line with [`linetype` and `linewidth`](https://ggplot2.tidyverse.org/reference/geom_violin.html#aesthetics).\n:::\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**draw_quantiles:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nWe can include lines for the 25th, 50th, and 75th quartiles using the `draw_quantiles` argument. \n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n\n```{.r .cell-code}\nggplot(data = peng_violin,\n       aes(x = island, \n           y = bill_length_mm, \n        fill = island)) +\n  geom_violin(\n      draw_quantiles = c(0.25, 0.5, 0.75),\n      alpha = 1/2, \n      linewidth = 0.5, \n      show.legend = FALSE) \n```\n\n::: {.cell-output-display}\n![](grouped_violin_plots_files/figure-html/grp_violin_draw_quantiles-1.png){width=100% height=100%}\n:::\n:::\n\n:::\n\n### Kernel\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**kernel:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nThe [`kernel` argument](https://ggplot2.tidyverse.org/reference/geom_violin.html#arguments) let's us change the \"*kernel density estimate*\" used to create the violin shape. The possible [kernel density estimates](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/density.html) are `\"gaussian\"`, `\"epanechnikov\"`, `\"rectangular\"`, `\"triangular\"`, `\"biweight\"`, `\"cosine\"`, and `\"optcosine\"` \n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n\n```{.r .cell-code}\nggplot(data = peng_violin,\n       aes(x = island, \n           y = bill_length_mm, \n        fill = island)) +\n  geom_violin(alpha = 1/2, \n      linewidth = 0.5, \n      kernel = \"rectangular\",\n      show.legend = FALSE) \n```\n\n::: {.cell-output-display}\n![](grouped_violin_plots_files/figure-html/grp_violin_kernel-1.png){width=100% height=100%}\n:::\n:::\n\n:::\n\n### Bandwidth\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**bw:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nWe can directly adjust the shape of the violin with the [`bw` argument](https://ggplot2.tidyverse.org/reference/geom_violin.html#arguments), which is the *standard deviation of the smoothing kernel.* The [`trim` argument](https://ggplot2.tidyverse.org/reference/geom_violin.html#arguments) *trim(s) the tails of the violins to the range of the data.*\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n\n```{.r .cell-code}\n# bw of 0.5\ngrp_violin_bw0p5 <- ggplot(data = peng_violin,\n       aes(x = island, \n           y = bill_length_mm, \n        fill = island)) +\n  geom_violin(bw = 0.5, \n      alpha = 2/3, \n      trim = TRUE,\n      show.legend = FALSE) \ngrp_violin_bw0p5 + \n    labs_grp_violin + \n    labs(caption = \"bw = 0.5\")\n# bw of 4.5\ngrp_violin_bw4p5 <- ggplot(data = peng_violin,\n       aes(x = island, \n           y = bill_length_mm, \n        fill = island)) +\n  geom_violin(bw = 4.5, \n      alpha = 2/3, \n      trim = TRUE,\n      show.legend = FALSE) \ngrp_violin_bw4p5 + \n    labs_grp_violin + \n    labs(caption = \"bw = 4.5\")\n```\n\n::: {.cell-output-display}\n![](grouped_violin_plots_files/figure-html/grp_violin_bw-1.png){width=100% height=100%}\n:::\n\n::: {.cell-output-display}\n![](grouped_violin_plots_files/figure-html/grp_violin_bw-2.png){width=100% height=100%}\n:::\n:::\n\n:::\n\n::::\n",
    "supporting": [
      "grouped_violin_plots_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}