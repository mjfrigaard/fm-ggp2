{
  "hash": "ae275dbdb1f629fb137b1acdfbc6b575",
  "result": {
    "markdown": "# Bump charts {.unnumbered}\n\n\n\n\n\n::: {.callout-tip appearance='simple' icon=false}\n***This graph is largely complete and just needs final proof reading.*** \n:::\n\n\n:::: {.callout-note collapse=\"false\" icon=false}\n## Graph info\n::: {style=\"font-size: 1.25em; color: #007bff;\"}\n**Should I use this graph?**\n:::\n\n<br>\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](bump_charts_files/figure-html/full_code_display-1.png){width=60% height=60%}\n:::\n:::\n\n\n::: {style=\"font-size: 1.10em; color: #007bff;\"}\n**This graph requires:**\n:::\n\n::: {style=\"font-size: 1.05em; color: #fa7b3c;\"}\n**✅ a categorical variable**      \n:::\n\n::: {style=\"font-size: 1.05em; color: #fa7b3c;\"}\n**✅ a numeric (continuous) variable**\n:::\n\n::: {style=\"font-size: 1.05em; color: #fa7b3c;\"}\n**✅ a numeric (date) variable**\n:::\n\n::::\n\n## Description \n\nBump charts show how numerical (ranked) values change over time for different categories (or groups). Differences are represented with connecting lines (along the `y` axis) that cover the full timescale (along the `x` axis).\n\nWe can build bump charts in `ggplot2` with the [`ggbump` package:](https://github.com/davidsjoberg/ggbump)  \n\n## Getting set up\n\n:::: {.panel-tabset}\n\n### Packages\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**PACKAGES:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nInstall packages.\n:::\n\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\n# pak::pak(\"davidsjoberg/ggbump\")\nlibrary(ggbump)\ninstall.packages(\"fivethirtyeight\")\nlibrary(fivethirtyeight) \nlibrary(ggplot2)\n```\n:::\n\n:::\n\n### Data\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**DATA:**\n:::\n\n::: {.column-margin}\n![](www/538.png){fig-align=\"right\" width=\"45%\" height=\"45%\"}\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nWe'll use the `fivethirtyeight::tv_hurricanes` data, but slightly restructured and filtered. \n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nfivethirtyeight::tv_hurricanes |> \n  filter(date > as_date(\"2017-09-15\")) |> \n  pivot_longer(cols = -date, \n    names_to = 'hurricane', \n    values_to = 'value') |> \n  group_by(date) |>\n  mutate(rank = rank(value, \n    ties.method = \"random\")) |> \n  ungroup() -> tidy_hurricanes\nglimpse(tidy_hurricanes)\n#> Rows: 40\n#> Columns: 4\n#> $ date      <date> 2017-09-16, 2017-09-16, 2017-09-16, 201…\n#> $ hurricane <chr> \"harvey\", \"irma\", \"maria\", \"jose\", \"harv…\n#> $ value     <dbl> 0.0207, 0.1087, 0.0000, 0.0355, 0.0087, …\n#> $ rank      <int> 2, 4, 1, 3, 1, 4, 2, 3, 1, 3, 4, 2, 1, 3…\n```\n:::\n\n:::\n::::\n\n## The grammar\n\n:::: {.panel-tabset}\n\n### Code\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**CODE:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\n\nCreate labels with `labs()`\n\nMap date to the `x`, `rank` to the `y`, and `hurricane` to `color`\n\nAdd `ggbump::geom_bump()` and set `size` to `2`\n\nMove legend to bottom with `theme(legend.position = \"bottom\")`\n\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nlabs_bump <- labs(title = \"TV News Hurricane Mentions\",   \n  subtitle = \"Between Sep 15-25th, 2017\", \n  x = \"Date\", y = \"Rank\", \n  color = \"Hurricanes\")\nggp2_bump <- ggplot(tidy_hurricanes, \n    aes(x = date, \n      y = rank, \n      color = hurricane)) +\n    ggbump::geom_bump(size = 2) + \n    theme(legend.position = \"bottom\")\n\nggp2_bump + \n  labs_bump\n```\n:::\n\n:::\n\n### Graph\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**GRAPH:**\n:::\n\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n::: {.cell-output-display}\n![](bump_charts_files/figure-html/create_graph_bump-1.png){width=100% height=100%}\n:::\n:::\n\n\n::::\n",
    "supporting": [
      "bump_charts_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}