{
  "hash": "5d6f866c96dc64e6c6c6342b44c266b8",
  "result": {
    "markdown": "# Grouped bubble graph {.unnumbered}\n\n\n\n\n\n::: {.callout-tip appearance='simple' icon=false}\n***This graph is largely complete and just needs final proof reading.*** \n:::\n\n\n\n:::: {.callout-note collapse=\"false\" icon=false}\n\n::: {style=\"font-size: 1.25em; color: #02577A;\"}\nGraph info\n:::\n\n<br>\n\n\n::: {.cell layout-align=\"right\"}\n::: {.cell-output-display}\n![](grouped_bubble_charts_files/figure-html/full_code_display-1.png){fig-align='right' width=60% height=60%}\n:::\n:::\n\n\n::: {style=\"font-size: 1.10em; color: #02577A;\"}\n**This graph requires:**\n:::\n\n::: {style=\"font-size: 1.05em; color: #282b2d;\"}\n**✅ a categorical variable**      \n:::\n\n::: {style=\"font-size: 1.05em; color: #282b2d;\"}\n**✅ two numeric (continuous) variables**\n:::\n\n::::\n\n## Description \n\nGrouped bubble graphs use position, color, and size to display the relationships between four variables (three numerical/quantitative, one categorical).\n\nThe position on the x and y axis captures the relationship between two numerical variables. The size and color of the points display a third numerical variable across the levels of a (fourth) categorical variable.\n\n## Getting set up\n\n:::: {.panel-tabset}\n\n### Packages\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**PACKAGES:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nInstall packages.\n:::\n\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ninstall.packages(\"palmerpenguins\")\nlibrary(palmerpenguins)\nlibrary(ggplot2)\n```\n:::\n\n:::\n\n### Data\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**DATA:**\n:::\n\n::: {.column-margin}\n![Artwork by allison horst](www/lter_penguins.png){fig-align=\"right\" width=\"100%\" height=\"100%\"}\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nThe `penguins` data \n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\npenguins <- palmerpenguins::penguins\nglimpse(penguins)\n#> Rows: 344\n#> Columns: 8\n#> $ species           <fct> Adelie, Adelie, Adelie, Adelie, …\n#> $ island            <fct> Torgersen, Torgersen, Torgersen,…\n#> $ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3…\n#> $ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6…\n#> $ flipper_length_mm <int> 181, 186, 195, NA, 193, 190, 181…\n#> $ body_mass_g       <int> 3750, 3800, 3250, NA, 3450, 3650…\n#> $ sex               <fct> male, female, female, NA, female…\n#> $ year              <int> 2007, 2007, 2007, 2007, 2007, 20…\n```\n:::\n\n:::\n::::\n\n## The grammar \n\n:::: {.panel-tabset}\n\n### Code\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**CODE:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\n\nCreate labels with `labs()`\n\nInitialize the graph with `ggplot()` and provide `data`\n\nMap `bill_length_mm` to the `x` axis and  `flipper_length_mm` to the `y` axis  \n\nInside `geom_point()`  \n\n  - map `body_mass_g` to `size` and `species` to `fill`  \n  - set the `alpha` to `2/3`\n    \nIn the `scale_size()`  \n\n  - set `range` to `c(.04, 6)`\n  \n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nlabs_grp_bubble <- labs(\n  title = \"Bill Length vs. Flipper Length\",\n  x = \"Bill Length (mm)\", \n  y = \"Flipper length (mm)\", \n  size = \"Body Mass\", \n  fill = \"Species\")\n\nggp2_grp_bubble <- penguins |> \n  ggplot(aes(\n    x = bill_length_mm, y = flipper_length_mm)) + \n  geom_point(\n    aes(size = body_mass_g, \n        color = species), \n            alpha = 2/3) + \n  scale_size(range = c(.04, 6)) \n\nggp2_grp_bubble + \n  labs_grp_bubble\n```\n:::\n\n:::\n\n### Graph\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**GRAPH:**\n:::\n\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n::: {.cell-output-display}\n![](grouped_bubble_charts_files/figure-html/create_graph_grp_bubble-1.png){width=100% height=100%}\n:::\n:::\n\n\n::::\n\n## More info \n\nWe can change the `shape` of the points for more control of the `color` and `fill`. \n\n:::: {.panel-tabset}\n### Shape\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**SHAPE:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nInside `geom_point()`, we can set `shape` to `21`, and `color` to `\"#000000\"` to outline the points in black\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nggp2_grp_bubble_s21 <- penguins |> \n  ggplot(aes(\n    x = bill_length_mm, y = flipper_length_mm)) + \n  geom_point(\n    aes(size = body_mass_g, fill = species), \n        alpha = 2/3, shape = 21, color = \"#000000\") + \n  scale_size(range = c(.04, 6)) \n\nggp2_grp_bubble_s21 + \n  labs_grp_bubble\n```\n\n::: {.cell-output-display}\n![](grouped_bubble_charts_files/figure-html/shape_21-1.png){width=100% height=100%}\n:::\n:::\n\n:::\n\n### Color\n\n::: {style=\"font-size: 1.15em; color: #1e83c8;\"}\n**COLOR:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nInside the `aes()` of `geom_point()`, we can set `shape` to `21`, and map `color` to `\"species\"` to outline the points in the same colors as `fill`\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell .column-page-inset-right layout-nrow=\"1\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nggp2_grp_bubble_s21_color <- penguins |> \n  ggplot(aes(\n    x = bill_length_mm, y = flipper_length_mm)) + \n  geom_point(\n    aes(size = body_mass_g, \n        fill = species, \n        color = species), \n        alpha = 2/3, shape = 21) + \n  scale_size(range = c(.04, 6)) \n\nggp2_grp_bubble_s21_color + \n  labs_grp_bubble\n```\n\n::: {.cell-output-display}\n![](grouped_bubble_charts_files/figure-html/shape_21_color_aes-1.png){width=100% height=100%}\n:::\n:::\n\n:::\n\n::::\n",
    "supporting": [
      "grouped_bubble_charts_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}