{"title":"Box plots","markdown":{"headingText":"Box plots","headingAttr":{"id":"","classes":["unnumbered"],"keyvalue":[]},"containsRefs":false,"markdown":"\n```{r}\n#| label: setup\n#| message: false\n#| warning: false\n#| include: false\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(scales)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(colorblindr)\nlibrary(downlit)\n# fonts ----\nlibrary(extrafont)\nlibrary(sysfonts)\nsource(\"_common.R\")\n# use font\nshowtext::showtext_auto()\n# set theme\nggplot2::theme_set(theme_ggp2g(\n    base_size = 15))\n```\n\n```{r}\n#| label: status\n#| results: \"asis\"\n#| echo: false\n# status ----\n# polishing, restructuring, drafting, complete\nstatus(\"complete\")\n```\n\n:::: {.callout-note collapse=\"false\" icon=false}\n## Graph info\n::: {style=\"font-size: 1.25em; color: #007bff;\"}\n**Should I use this graph?**\n:::\n\n<br>\n\n```{r}\n#| label: full_code_display\n#| eval: true\n#| echo: false\n#| warning: false\n#| message: false\n#| out-height: '60%'\n#| out-width: '60%'\n#| fig-align: right\nlibrary(ggplot2movies)\nlibrary(ggplot2)\npenguins <- palmerpenguins::penguins \nlabs_boxplot <- labs(\n  title = \"Adult foraging penguins\",\n  subtitle = \"Distribution of flipper length\",\n  x = NULL,\n  y = \"Flipper length (millimeters)\")\nggp2_boxplot <- ggplot(data = penguins,\n           aes(x = \"\", \n               y = flipper_length_mm)) +\n        geom_boxplot() \nggp2_boxplot + \n  labs_boxplot\n```\n\n::: {style=\"font-size: 1.10em; color: #007bff;\"}\n**This graph requires:**\n:::\n\n::: {style=\"font-size: 1.05em; color: #fa7b3c;\"}\n**`r emo::ji(\"check\")` a numeric (continuous) variable**\n:::\n\n::::\n\n## Description\n\nBox plots (sometimes called box-and-whisker plots) use position, lines (vertical and horizontal), and points to convey a collection of summary statistics in a single graph.\n\n## Getting set up\n\n:::: {.panel-tabset}\n\n### Packages\n\n::: {style=\"font-size: 1.10em; color: #1e83c8;\"}\n**PACKAGES:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nInstall packages.\n:::\n\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: pkg_code_boxplot\n#| code-fold: show\n#| eval: false\n#| echo: true\n#| warning: false\n#| message: false\n#| results: hide\ninstall.packages(\"palmerpenguins\")\nlibrary(palmerpenguins) \nlibrary(ggplot2)\n```\n:::\n\n### Data\n\n::: {style=\"font-size: 1.10em; color: #1e83c8;\"}\n**DATA:**\n:::\n\n::: {.column-margin}\n![Artwork by Allison Horst](www/lter_penguins.png){fig-align=\"right\" width=\"100%\" height=\"100%\"}\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nWe'll be using the `penguins` data from `palmerpenguins`.\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: data_code_box\n#| code-fold: show\n#| eval: true\n#| echo: true\npenguins <- palmerpenguins::penguins \nglimpse(penguins)\n```\n:::\n::::\n\n## The grammar\n\n:::: {.panel-tabset}\n\n### Code\n\n::: {style=\"font-size: 1.10em; color: #1e83c8;\"}\n**CODE:**\n:::\n\n::: {style=\"font-size: 0.85em;\"}\n\nCreate labels with `labs()`\n\nInitialize the graph with `ggplot()` and provide `data`\n\n  - Assign a blank character string (`\"\"`) to the `x` axis in `labs()`\n\nMap `flipper_length_mm` to the `y` axis and an empty string (`\"\"`) to the `x` axis\n\nAdd the `geom_boxplot()` layer\n\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: code_graph_box\n#| code-fold: show\n#| eval: false\n#| echo: true \n#| warning: false\n#| message: false\nlabs_boxplot <- labs(\n  title = \"Adult foraging penguins\",\n  subtitle = \"Distribution of flipper length\",\n  x = \"\",\n  y = \"Flipper length (millimeters)\")\nggp2_boxplot <- ggplot(data = penguins,\n           aes(x = \"\", \n               y = flipper_length_mm)) +\n        geom_boxplot() \nggp2_boxplot + \n  labs_boxplot\n```\n:::\n\n### Graph\n\n::: {style=\"font-size: 1.10em; color: #1e83c8;\"}\n**GRAPH:**\n:::\n\n```{r}\n#| label: create_graph_box\n#| eval: true\n#| echo: false\n#| warning: false\n#| message: false\n#| layout-nrow: 1\n#| column: page-inset-right\nlabs_boxplot <- labs(\n  title = \"Adult foraging penguins\",\n  subtitle = \"Distribution of flipper length\",\n  x = \"\",\n  y = \"Flipper length (millimeters)\")\nggp2_boxplot <- ggplot(data = penguins,\n           aes(x = \"\", \n               y = flipper_length_mm)) +\n        geom_boxplot() \nggp2_boxplot + \n  labs_boxplot\n```\n\n::::\n\n### More Info\n\nBelow we provide more information on interpreting Box plots. \n\n:::: {.panel-tabset}\n\n### `movies` data \n\n::: {style=\"font-size: 0.85em;\"}\nWe'll use the `ggplot2movies::movies` data to create a box plot for movie `length`\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: more_box_pkgs\n#| eval: false\n#| echo: true\n#| warning: false\n#| message: false\ninstall.packages(\"ggplot2movies\")\nlibrary(ggplot2movies) \nlibrary(ggplot2)\n```\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nFilter `ggplot2movies::movies` to only include films after the made after `2000`, and remove missing values from `mpaa` and `budget`\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: more_box_data\n#| eval: true\n#| echo: true\n#| warning: false\n#| message: false\nmovies_box <- ggplot2movies::movies |> \n                dplyr::filter(year > 2000 & \n                                mpaa != \"\" & \n                                    !is.na(budget))\nhead(movies_box)\n```\n:::\n\n### Graph\n\n::: {style=\"font-size: 0.85em;\"}\n\nBelow we create a box plot of the `length` variable using the methods described above: \n\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: more_create_graph_box\n#| eval: true\n#| echo: true\n#| warning: false\n#| message: false\n#| layout-nrow: 1\n#| column: page-inset-right\nlabs_boxplot <- labs(\n  title = \"IMDB Movie information and user ratings\",\n  y = \"Movie length (min)\", x = \"\")\nggp2_boxplot <- ggplot(data = movies_box, \n           aes(x = \" \", \n               y = length)) +\n        geom_boxplot() \n\nggp2_boxplot + \n  labs_boxplot\n```\n:::\n\n### Interpret\n\n::: {style=\"font-size: 0.85em;\"}\nThe table below shows the 25th percentile, the median, the 75th percentile, the IQR, and a histogram of the `length` variable from the `movies_box` dataset.\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n```{r}\n#| label: box_table_stats\n#| eval: true\n#| echo: false \nlgnth_skim <- skimr::skim(movies_box$length)\nLengthBoxStats <- select(lgnth_skim,\n     `25th` = numeric.p25, Median = numeric.p50,\n     `75th` = numeric.p75, Histogram = numeric.hist) %>%\n     mutate(IQR = IQR(movies_box$length, na.rm = TRUE)) %>%\n     select(`25th`, Median, `75th`, IQR, Histogram)\nkableExtra::kable_paper(\n  kable_input = knitr::kable(LengthBoxStats), \n  font_size = 14)\n```\n:::\n\n::: {style=\"font-size: 0.85em;\"}\nThe figure below displays how each element in the box plot represents each of the statistics using lines and points.\n:::\n\n:::: {.column-margin}\n::: {style=\"font-size: 0.85em;\"}\nIn `ggplot2`, values that fall more than 1.5 times the IQR are displayed as individual points (aka outliers). The lines extending from the bottom and top of the main box represent the last non-outlier value in the distribution.\n:::\n::::\n\n![](www/boxplot-diagram.png){fig-align=\"center\" width=\"80%\" height=\"80%\"}\n\n\n### Compare\n\n::: {style=\"font-size: 0.85em;\"}\nCompare the `geom_point()`, `geom_freqpoly()`, `geom_histogram()`, and `geom_density()` graphs of `length` from `movie_box` below to the `geom_boxplot()`:\n:::\n\n![](www/boxplot-comparisons.png){fig-align=\"center\" width=\"85%\" height=\"85%\"}\n\n\n::::\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"paged","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"arrow","toc":true,"toc-depth":5,"number-sections":true,"dpi":320,"output-file":"box_plots.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["references.bib"],"theme":["cosmo","custom.scss"],"toc-location":"right","toc-title":"Contents","code-block-bg":"#f8f8f8","code-block-border-left":"#99bbc9","code-annotations":"hover","callout-appearance":"simple","code-summary":"show/hide","fig-asp":0.618,"fontsize":"1.085em","linestretch":1.25},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}